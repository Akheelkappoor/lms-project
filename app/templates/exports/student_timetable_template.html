<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ student_info.name }} - Class Schedule</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: white;
            color: #333;
            line-height: 1.4;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            overflow: hidden;
        }
        
        /* Header */
        .header {
            background: #f8f9fa;
            padding: 30px 20px;
            text-align: center;
            border-bottom: 2px solid #dee2e6;
        }
        
        .header h1 {
            font-size: 28px;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .student-name {
            font-size: 22px;
            font-weight: 600;
            color: #495057;
            margin-bottom: 15px;
        }
        
        .header-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            max-width: 600px;
            margin: 0 auto;
        }
        
        .info-item {
            background: white;
            padding: 12px;
            border-radius: 6px;
            border: 1px solid #dee2e6;
            text-align: center;
        }
        
        .info-label {
            font-size: 12px;
            color: #6c757d;
            font-weight: 500;
            margin-bottom: 4px;
            text-transform: uppercase;
        }
        
        .info-value {
            font-size: 14px;
            font-weight: bold;
            color: #2c3e50;
        }
        
        /* Days Header */
        .days-header {
            margin: 0;
        }
        
        .days-table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .days-table th {
            background: #495057;
            color: white;
            padding: 15px 8px;
            text-align: center;
            font-weight: bold;
            font-size: 14px;
            width: 14.28%;
            border-right: 1px solid #6c757d;
        }
        
        .days-table th:last-child {
            border-right: none;
        }
        
        /* Timetable Grid */
        .timetable-grid {
            margin: 0;
        }
        
        .time-row {
            border-bottom: 1px solid #dee2e6;
        }
        
        .time-table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .time-cell {
            padding: 12px 8px;
            text-align: center;
            vertical-align: top;
            width: 14.28%;
            min-height: 100px;
            background: white;
            font-size: 12px;
            line-height: 1.3;
            border-right: 1px solid #dee2e6;
            position: relative;
        }
        
        .time-cell:last-child {
            border-right: none;
        }
        
        .time-cell.empty-cell {
            background: #f8f9fa;
            color: #6c757d;
        }
        
        .class-content {
            display: block;
            word-wrap: break-word;
            height: 100%;
            padding: 8px;
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 6px;
            margin: -4px;
            transition: all 0.2s ease;
        }
        
        .time-cell:not(.empty-cell) .class-content {
            background: white;
            border: 2px solid #495057;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .time-cell:not(.empty-cell) .class-content:hover {
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
            transform: translateY(-1px);
        }
        
        .subject {
            font-weight: bold;
            margin-bottom: 6px;
            font-size: 13px;
            color: #2c3e50;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .person {
            margin-bottom: 6px;
            font-weight: 500;
            font-size: 11px;
            color: #495057;
        }
        
        .time {
            margin-bottom: 4px;
            font-size: 10px;
            font-weight: 600;
            color: #6c757d;
            background: #f8f9fa;
            padding: 2px 6px;
            border-radius: 10px;
            display: inline-block;
        }
        
        .status {
            font-size: 9px;
            font-style: italic;
            color: #6c757d;
        }
        
        /* Summary Section */
        .summary-section {
            background: #f8f9fa;
            padding: 20px;
            border-top: 2px solid #dee2e6;
            margin-top: 0;
        }
        
        .summary-title {
            text-align: center;
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 20px;
            color: #2c3e50;
            text-transform: uppercase;
        }
        
        .summary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            max-width: 800px;
            margin: 0 auto;
        }
        
        .summary-card {
            background: white;
            padding: 15px;
            border-radius: 6px;
            border: 1px solid #dee2e6;
            text-align: center;
        }
        
        .summary-number {
            font-size: 24px;
            font-weight: bold;
            color: #495057;
            margin-bottom: 5px;
        }
        
        .summary-label {
            font-size: 12px;
            color: #6c757d;
            font-weight: 500;
            text-transform: uppercase;
        }
        
        /* Subject Details Table */
        .subjects-section {
            padding: 20px;
            background: white;
        }
        
        .subjects-title {
            text-align: center;
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 20px;
            color: #2c3e50;
            text-transform: uppercase;
        }
        
        .subjects-table {
            width: 100%;
            border-collapse: collapse;
            border: 1px solid #dee2e6;
            border-radius: 6px;
            overflow: hidden;
        }
        
        .subjects-table th {
            background: #495057;
            color: white;
            padding: 12px;
            text-align: left;
            font-weight: bold;
            font-size: 13px;
        }
        
        .subjects-table td {
            padding: 12px;
            border-bottom: 1px solid #dee2e6;
            font-size: 12px;
        }
        
        .subjects-table tr:nth-child(even) {
            background: #f8f9fa;
        }
        
        .subjects-table tr:hover {
            background: #e9ecef;
        }
        
        /* Footer */
        .footer {
            background: #495057;
            color: white;
            padding: 20px;
            text-align: center;
        }
        
        .footer p {
            font-size: 14px;
            margin: 0;
        }
        
        /* Print Styles */
        @media print {
            body {
                padding: 10px;
                background: white;
            }
            
            .container {
                border: 1px solid #000;
                box-shadow: none;
            }
            
            .time-cell:not(.empty-cell) .class-content {
                border: 1px solid #000;
                box-shadow: none;
            }
        }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            .header-info {
                grid-template-columns: 1fr 1fr;
            }
            
            .days-table th {
                font-size: 11px;
                padding: 10px 4px;
            }
            
            .time-cell {
                font-size: 10px;
                padding: 8px 4px;
                min-height: 80px;
            }
            
            .subject {
                font-size: 11px;
            }
            
            .summary-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
    <script>
        // Function to extract and simplify subject names
        function simplifySubjectName(fullName) {
            // Extract subject from names like "HARSHINI-GRD10-CBSE-HINDI"
            if (fullName.includes('-')) {
                const parts = fullName.split('-');
                // Get the last part which should be the subject
                return parts[parts.length - 1];
            }
            return fullName;
        }
        
        // Simplify all subject names when page loads
        document.addEventListener('DOMContentLoaded', function() {
            const subjects = document.querySelectorAll('.subject');
            subjects.forEach(function(element) {
                const originalText = element.textContent;
                const simplifiedText = simplifySubjectName(originalText);
                element.textContent = simplifiedText;
            });
        });
    </script>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>ðŸ“š Student Class Schedule</h1>
            <div class="student-name">{{ student_info.name }}</div>
            <div class="header-info">
                <div class="info-item">
                    <div class="info-label">Grade</div>
                    <div class="info-value">{{ student_info.grade or 'N/A' }}</div>
                </div>
                <div class="info-item">
                    <div class="info-label">Board</div>
                    <div class="info-value">{{ student_info.board or 'N/A' }}</div>
                </div>
                <div class="info-item">
                    <div class="info-label">Period</div>
                    <div class="info-value">{{ date_range }}</div>
                </div>
            </div>
        </div>
        
        <!-- Days Header -->
        <div class="days-header">
            <table class="days-table">
                <tr>
                    <th>MONDAY</th>
                    <th>TUESDAY</th>
                    <th>WEDNESDAY</th>
                    <th>THURSDAY</th>
                    <th>FRIDAY</th>
                    <th>SATURDAY</th>
                    <th>SUNDAY</th>
                </tr>
            </table>
        </div>
        
        <!-- Timetable Grid -->
        <div class="timetable-grid">
            {% for time_slot in time_slots %}
            <div class="time-row">
                <table class="time-table">
                    <tr>
                        {% for day in ['monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday', 'sunday'] %}
                        {% set day_classes = timetable_data.get(day, {}).get(time_slot, []) %}
                        <td class="time-cell {% if not day_classes %}empty-cell{% endif %}">
                            {% if day_classes %}
                                {% for class_info in day_classes %}
                                <div class="class-content">
                                    <div class="subject">{{ class_info.subject }}</div>
                                    <div class="person">{{ class_info.tutor_name }}</div>
                                    <div class="time">{{ class_info.start_time }} - {{ class_info.end_time }}</div>
                                    <div class="status">{{ class_info.status }}</div>
                                </div>
                                {% endfor %}
                            {% else %}
                                <div class="class-content">
                                    <div style="color: #adb5bd; font-style: italic; font-size: 11px;">Free Time</div>
                                </div>
                            {% endif %}
                        </td>
                        {% endfor %}
                    </tr>
                </table>
            </div>
            {% endfor %}
        </div>
        
        <!-- Summary Section -->
        <div class="summary-section">
            <div class="summary-title">Weekly Summary</div>
            <div class="summary-grid">
                <div class="summary-card">
                    <div class="summary-number">{{ total_classes or 0 }}</div>
                    <div class="summary-label">Total Classes</div>
                </div>
                <div class="summary-card">
                    <div class="summary-number">{{ unique_subjects|length or 0 }}</div>
                    <div class="summary-label">Subjects</div>
                </div>
                <div class="summary-card">
                    <div class="summary-number">{{ unique_tutors|length or 0 }}</div>
                    <div class="summary-label">Tutors</div>
                </div>
                <div class="summary-card">
                    <div class="summary-number">{{ total_hours or 0 }}</div>
                    <div class="summary-label">Hours/Week</div>
                </div>
            </div>
        </div>
        
        <!-- Subject Details -->
        {% if unique_subjects %}
        <div class="subjects-section">
            <div class="subjects-title">Subject Details</div>
            <table class="subjects-table">
                <thead>
                    <tr>
                        <th>Subject</th>
                        <th>Tutor</th>
                        <th>Classes/Week</th>
                        <th>Total Hours</th>
                    </tr>
                </thead>
                <tbody>
                    {% for subject, details in subject_details.items() %}
                    <tr>
                        <td><strong>{{ subject }}</strong></td>
                        <td>{{ details.tutor_name }}</td>
                        <td>{{ details.classes_count }}</td>
                        <td>{{ details.total_hours }} hrs</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        {% endif %}
        
        <!-- Footer -->
        <div class="footer">
            <p>ðŸ“š Generated by i2Global Learning Management System | {{ current_date }}</p>
        </div>
    </div>
</body>
</html>